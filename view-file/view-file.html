<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Visualizar Archivo</title>
  <link rel="stylesheet" href="styles-view.css">
  <link href="images/logo.png" rel="shortcut icon">
</head>
<body>
    <div class="container">
 
<!-- PARTE DE ARRIBA - TITULOS -->
    <div class="top-section">
        <img src="../images/tecnm.png" alt="Logo Tecnm" class="logo-tecnm">
        <img src="../images/ittepic.png" alt="Logo Tec" class="logo-ittepic">
        <img src="../images/nexus2.png" alt="Logo Nexus" class="logo-nexus">
        <img src="../images/nombrenexus.png" alt="Logo Nombre Nexus" class="logo-nombrenexus">
    </div>

<!-- BARRA AZUL DE OPCIONES -->

<div class="opciones" style=" display: inline-block;">
        
    <!-- Botones -->
    <div>
        <atras onclick="window.history.back()" style="display: inline-block; background-image: url('../images/atras - icono blanco.png'); background-size: cover; background-repeat: no-repeat; border: none; background-color: transparent; border-radius: 0;"></atras>
        <h4 id="titulodocumento" style="display: inline-block; background-size: cover; background-repeat: no-repeat; border: none; background-color: transparent; border-radius: 0;">Nombre documento</h4>
    </div>

    <div style="margin-top: -3.5%;" >
        <button onclick="sumarPorcentaje()" style="display: inline-block;">+</button>
        <input type="text" id="porcentaje" style="display: inline-block; color:rgb(255, 255, 255); text-align: center;" readonly value="100">
        <button onclick="restarPorcentaje()" style="display: inline-block;">-</button>
    </div>

    <div style="margin-top: -1.6%; margin-left: 42%;">                  
        <button style="display: inline-block; background-image: url('../images/comentario - icono blanco.png'); background-size: cover; background-repeat: no-repeat; border: none; background-color: transparent; border-radius: 0;"></button>
        <a href="https://drive.google.com/uc?export=download&id=" id="downloadLink">
        <button style="display: inline-block; margin-left: 2%; background-image: url('../images/descarga - icono blanco.png'); background-size: cover; background-repeat: no-repeat; border: none; background-color: transparent; border-radius: 0;"></button></a>
    </div>
</div>


<!-- BARRA DE LA IZQUIERDA -->

    <div class="left-section" > 
        <!-- SE SUSTITUYE EL HTML HACIA DONDE SE QUIERE REDIRECCIONAR -->
        <div>
            <img src="../images/Mi_Perfil.png" alt="Mi_perfil" class="fotosperfil">
            <a href="../profile.php">Mi perfil</a>
        </div>
        <div>
            <img style="margin-top: 30%;" src="../images/Subir.png" alt="Subir" class="fotosperfil ">
            <a href="../subir/SubirArchivo.html">Subir</a>
        </div>
        <div>
            <img style="margin-top: 60%;" src="../images/Mis_archivos.png" alt="Mis_archivos" class="fotosperfil">
            <a href="my-files.php">Mis Archivos</a>
        </div>
        <div>
            <img style="margin-top: 200%;" src="../images/Cerrar_sesion.png" alt="Cerrar_sesion" class="fotosperfil"> 
            <a  style="margin-top: 135%;"  href="../login.html">Cerrar sesión</a>
        </div>

    </div>

 <!-- PARTE AZUL DE CONTENIDO -->

    <div class="bottom-section">
        <iframe id="filePreview" width="98%" height="600px"></iframe>
    </div>

  </div>

  <script>
    // Obtener el ID del archivo de la URL del iframe
    const urlParams = new URLSearchParams(window.location.search);
    const fileId = urlParams.get('id');

    // Obtener el nombre del documento de la URL
    const fileName = urlParams.get('nombre');

    // Mostrar el nombre del documento
    document.getElementById('titulodocumento').innerText = fileName;
    // Cambiar el título de la pestaña del navegador
    document.title = fileName;

    // Construir la URL del archivo de Google Drive con el ID obtenido
    const fileUrl = `https://drive.google.com/file/d/${fileId}/preview`;

    // Obtener referencia al iframe y al enlace de descarga
    const iframe = document.getElementById('filePreview');
    const downloadLink = document.getElementById('downloadLink');

    // Establecer la URL del archivo como src del iframe
    iframe.src = fileUrl;

    // Actualizar el href del enlace de descarga con el mismo ID
    downloadLink.href += fileId;

    // Función para aumentar el porcentaje de zoom del iframe
    function sumarPorcentaje() {
        const porcentajeInput = document.getElementById('porcentaje');
        let porcentaje = parseInt(porcentajeInput.value) || 100;
        porcentaje += 10;
        porcentajeInput.value = porcentaje;
        iframe.style.transform = `scale(${porcentaje / 100})`;
    }

    // Función para disminuir el porcentaje de zoom del iframe
    function restarPorcentaje() {
        const porcentajeInput = document.getElementById('porcentaje');
        let porcentaje = parseInt(porcentajeInput.value) || 100;
        if (porcentaje > 10) {
            porcentaje -= 10;
            porcentajeInput.value = porcentaje;
            iframe.style.transform = `scale(${porcentaje / 100})`;
        }
    }
</script>


</body>
</html>
